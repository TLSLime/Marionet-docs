# Marionet 项目愿景

> 智能桌面陪伴系统的技术探索

---

## 目录

- [项目动机](#项目动机)
- [现状分析](#现状分析)
- [设计方案](#设计方案)
- [核心理念](#核心理念)
- [技术架构](#技术架构)
- [使用场景](#使用场景)
- [发展路线](#发展路线)
- [致开发者](#致开发者)

---

## 项目动机

本项目起源于一个具体需求：**如何让虚拟角色（游戏/动漫角色）以更智能的方式实现桌面陪伴？**

现有方案的局限：
- 游戏内互动受限于剧情脚本
- 传统桌宠只能循环播放预设内容
- AI 聊天缺乏视觉呈现和持久化
- Web 方案性能和体验不够理想

### 核心目标

作为个人兴趣项目和技术研究课题，Marionet 致力于：

**技术探索**：
- 整合 LLM、Live2D、环境感知等技术
- 验证离线优先的混合架构
- 实现自然的人机交互体验
- 构建长期记忆和用户画像系统

**开放生态**：
- 提供标准化的开放框架
- 为开发者提供技术路线参考
- 探索合规的模型使用方案
- 开发配套工具降低使用门槛

### 关于合规性

本项目重视 Live2D 许可协议的合规性：

- **不支持随意导入模型** - 避免侵权和许可问题
- **开发配套工具** - 提供角色制作、参数调节、模型封装的专门工具
- **规范使用** - 用户需确保对模型拥有合法权利

在免费开源、法律合规、易用性之间寻找平衡，虽会增加使用门槛，但这是项目可持续发展的必要措施。

---

## 现状分析

### 桌宠的演变

**传统桌宠（90年代-2010s）**  
通过简单动画和基础交互提供情感陪伴，重在营造氛围而非复杂功能。

**现代桌宠（2010s至今）**  
融合 AI 与动态建模，实现智能对话、情感辨识和丰富表现，向 Vtuber 交互范式靠拢。

### 存在的问题

**体验层面**：
- 交互机械，固定台词循环
- 功能割裂，缺乏统一框架
- 不分场合打扰，侵入性强
- 无长期记忆，无法建立联系

**技术层面**：
- Web 方案性能不足，资源占用高
- 依赖网络，核心功能离线不可用
- 架构混乱，维护成本高
- 文档缺失，学习成本高

**生态层面**：
- 缺少技术交流和标准化
- 重复开发，经验难以沉淀
- 配置复杂，用户门槛高

### 技术机遇

- **大语言模型** - 自然流畅的对话
- **多模态 AI** - 理解视觉和听觉信息
- **图数据库** - 构建记忆网络
- **本地部署** - 保证隐私和离线可用
- **Live2D** - 生动的视觉表现

### 核心问题

如何实现：
1. 自然、非侵入的陪伴交互
2. 轻量高效的桌面应用
3. 易用的开发和使用体验
4. 可扩展、可定制的架构
5. 合规的开源方案

---

## 设计方案

### 定位：陪伴型系统

Marionet 定位为**陪伴型系统**而非工具型助手：

| 维度 | 工具型助手 | 陪伴型系统 |
|------|----------|----------|
| 触发方式 | 指令驱动 | 环境感知 + 自主判断 |
| 交互目标 | 完成任务 | 提供陪伴体验 |
| 状态持久 | 会话隔离 | 长期记忆关联 |
| 个性化 | 标准化响应 | 角色化表现 |

### 技术特征

**环境感知** - 识别活动类型、用户状态、环境变化  
**决策机制** - 判断互动时机、选择互动方式  
**记忆系统** - 存储历史、学习偏好、建立关联  
**持续性** - 跨会话保持、基于历史调整  
**角色化** - 可配置性格、一致风格、情绪模拟

### 设计原则

**1. 交互体验优先**
- 适度延迟比极限速度更自然
- 有个性的回复比标准答案更有效
- 合适的静默比高频互动更重要

**2. 尊重用户控制权**
- 检测专注状态，自动静默
- 数据本地存储，完全可控
- 可离线使用，可自定义行为

**3. 追求交互自然度**
- 允许情绪变化和状态波动
- 支持非标准化的回复
- 保留适度的不确定性

---

## 核心理念

### 1. 离线可用，在线增强

- 基础功能完全本地实现
- AI 服务提供高级能力
- 网络故障时自动降级
- Fast 本地 + Slow 云端混合架构

### 2. 有机融合

统一的 **"感知 → 决策 → 表现"** 框架，所有功能共享上下文和状态。

```
感知层 → 理解环境和用户状态
  ↓
决策层 → 基于上下文做判断
  ↓
表现层 → 通过对话/动作/表情呈现
```

### 3. 低侵入，高温度

**智能择机** - 环境感知、专注检测、情境判断  
**礼貌分级** - 视觉提示 → 文字气泡 → 主动对话  
**强否决** - 全屏、会议、深度专注时完全静默

### 4. 长期记忆与成长

**记忆系统** - 事件记忆、偏好学习、情感标记、关联网络

**成长阶段**：
- 初识期（0-7天） - 礼貌试探
- 熟悉期（7-30天） - 记住习惯
- 信任期（30-90天） - 读懂情绪
- 默契期（90天+） - 老朋友默契

### 5. 开放与可扩展

**角色使用**：
- 配套设计工具进行角色制作和配置
- 模型封装和加密机制
- 自定义性格、口癖、行为
- 用户需确保对模型拥有合法使用权

**模块化架构**：
- 核心框架 + 可选模块
- 清晰接口定义
- 按需加载功能

**社区生态**：
- 开源核心代码和技术方案
- 分享角色配置文件和行为模板
- 提供技术参考和最佳实践
- 合规分享机制（配置文件而非模型文件）

---

## 技术架构

### 架构设计

```
表现层 - Live2D | 动画 | UI | 音效
  ↓
核心层 - Perception | Decision | Dispatcher
  ↓
服务层 - Memory | LLM | TTS | Vision
```

**设计原则**：
- 单一职责 - 每个模块只做一件事
- 依赖倒置 - 依赖接口而非实现
- 开放封闭 - 对扩展开放，对修改封闭

### 性能目标

- 空闲时 CPU < 5%，GPU < 10%，内存 < 500MB 
- Fast 通道 < 300ms，Slow 流式输出
- 笔记本模式不过分影响续航
- 性能不足时降级而非崩溃

**优化策略** - 懒加载、智能缓存、异步处理、优先级队列

### 数据与隐私

- 所有数据默认本地存储
- 可选云同步（加密）
- 可随时导出和删除
- 支持多个 LLM 提供商和本地部署

### 跨平台规划

当前专注 Windows 10/11，后续支持 macOS、Linux，探索移动端可能性。

---

## 使用场景

### 典型场景示例

**早晨** - 检测上线，醒来动画："早安～今天是周五呢"

**工作** - 专注时保持安静，Bug 解决后："解决了吗？我就说你可以的～"

**娱乐** - 检测环境变化："下班啦？玩什么游戏？"

**夜间** - 准备休息时："今天辛苦了～明天是周末，可以好好休息"

### 预期效果

**短期（数周）** - 积累数据，建立偏好模型  
**中期（数月）** - 优化时机，形成交互习惯  
**长期（半年+）** - 个性化模式，自然陪伴体验

### 角色适配

支持游戏角色、动漫角色、Vtuber、原创角色等不同类型，通过配置文件和参数调整实现差异化。

---

## 发展路线

### 第一阶段：核心体验（当前-v1.0）

- 完善 Fast/Slow 双通道对话
- 实现环境感知与智能择机
- 构建基础记忆系统
- 优化 Live2D 表现和口型同步
- **开发配套设计工具**（角色配置、模型封装、行为编辑）

### 第二阶段：深度功能（v1.0-v2.0）

- 游戏陪玩深度适配
- VTuber / 直播模式
- 高级记忆管理
- 多角色并行支持
- **完善配套工具**（可视化编辑、调试功能）

### 第三阶段：功能拓展（v2.0+）

- 完善工具链
- 跨平台支持
- 开发者文档和教程体系

### 研究目标

- 验证技术可行性
- 探索记忆和画像实现方案
- 研究自然人机交互设计模式
- 提供合规的开源解决方案
- 为开发者提供技术参考

---

## 致开发者

本项目作为开源兴趣项目，欢迎志同道合的开发者参与。

### 项目价值

**技术参考** - 提供完整实现方案，分享设计思考，记录问题和解决方案  
**合规探索** - 探索 Live2D 合规使用，平衡开源和法律风险

### 参与前提

**技术理念** - 重视适用性、可维护性、文档完整性  
**设计原则** - 服务核心目标、保持开放性、避免过度设计、确保合规性  
**开发态度** - 质量优先、鼓励讨论、理性分析、愿意分享

### 贡献方向

- 核心功能开发（感知、决策、表现层）
- 工具开发（配置、封装、编辑、调试）
- 文档和分享（技术文档、设计思路、最佳实践）

项目希望不仅提供可用框架，更为这个技术方向提供有价值的参考，让后来者少走弯路。

---

## 总结

Marionet 是一个个人兴趣驱动的技术研究项目，旨在：

- 探索桌面陪伴系统的技术实现方案
- 验证离线优先 + AI 增强的混合架构
- 提供合规的开源解决方案
- 为其他开发者提供技术参考

项目重在技术探索和经验分享，希望能在这个方向上做得更规范、更好，为有相同兴趣的开发者提供参考和帮助。

---

<p align="center">
  <strong>Marionet Project</strong><br>
  An open-source desktop companion framework
</p>